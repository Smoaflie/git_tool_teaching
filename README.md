# Learning

## 规则

​	你需要知道git是如何工作的，特别是三个区的概念

​	你需要掌握自己寻找答案的能力，擅用手上的工具

> 经测试，gpt是能正常识别这些任务需求的
>
> 但我们不希望你依赖于gpt**直接获取**答案，你应该让gpt**教会**你

​	有时候，git自带的参数提示也是很好的指导书

> 尝试在终端内输入
>
> ```bash
> git
> ```
>
> 你可以看到常见的几个命令
>
> 如果你不了解某个命令的参数，比如remote，尝试输入
>
> ```bash
> git remote -h
> ```



## 你需要完成的任务

### 本地仓库配置

- fork原仓库，将当前项目的默认远程仓库链接（origin）替换为你 fork 后的仓库链接（如 https://github.com/yourname/repo.git）

  > git remote set-url [--push] <name> <newurl> [<oldurl>]

- cache文件夹内的文件均不该被添加到仓库内，build文件夹内后缀为.cache的文件不该被添加到仓库内，请删除它们

  - 注意，我们规定，你在进行开发时每次编译都会制造上述两种不该被添加进仓库的”缓存文件“，因此你应该想办法让git**忽略**这些文件，而不是简单地删除他们
  
    > 编写.gitignore文件

  - 另外，如果单纯地**忽略+删除**，仓库的对象数据库内仍会保存相关的信息，即仍会占据一定的空间，请尝试自行搜索方法**以从历史记录中完全移除 `cache/` 文件夹和 `build/*.cache` 文件。**
    
    > 该部分建议询问gpt或搜索引擎，不常用，但你需要知道如何处理该需求	
    
    - 拓展，如果仓库内不小心上传了一些敏感信息，也可以使用该方法清除
  
  ---


### 模拟开发

综上，你获得了一个干净的本地仓库。下一步我们将进行**模拟开发**

---

- 基于当前分支新建一个新分支，按一般开发流程，我们会选用`dev`作为分支名

  ```bash
  git branch dev
  ```

- 切换到开发分支

  ```bash
  git switch dev
  ```

  - 一般开发流程：

    > **`main` 分支**：主分支，始终处于稳定的状态，通常是生产环境使用的代码。
    >
    > **`dev` 分支**：开发分支，用于集成开发中的功能或修复，功能分支会定期合并到此处。
    >
    > **功能分支**：从 `dev` 分支派生，用于单个功能的开发。

- 在分支内随便写点什么东西，并进行相应的提交，提交信息应能反映该次提交修改了什么

- 这时候你发现你需要引入一个第三方开源库

  - 要求是
    - 该第三方开源库存在于工作区内，可以被本地仓库的文件引用
    - 该第三方开源库能方便地通过其远程仓库链接进行更新
    - 该第三方开源库的修改不会被本地仓库跟踪
    
  - 为了方便学习，我们在仓库内模拟了`.\remote\opensource-lib-bare\`作为第三方开源库链接

  - 我们期望把这个库的内容放到`./Third-Party/origin/`目录下

  - 请尝试除直接复制到本地仓库以外的办法

    ```bash
    git submodule add <第三方开源库的URL> ./Third-Party/origin/
    # 因网络问题可能报错，多尝试几次
    git submodule update --remote ./Third-Party/origin/
    # 查看本地.gitmodules文件
    ```

- 假设此时远程更新了，但对于你来说，你只想变更对应目录下./lib文件夹下的内容

  > 暂时想不到模拟的法子，请自行搜索 **fetch + 检出部分文件** 关键词学习，并体会和 **pull** 的区别

- 切换回`learning`分支，合并dev分支

- 将本地仓库push到远程仓库

---

### 团队协作

​	综上，现在你拥有了一个个人开发的代码管理仓库。下一步我们将模拟**团队协作**。

---

 - 假设你在进行一个多人项目的开发，让我们把上一节使用的`dev`分支视为一个**功能分支**

 - 同一时期，会有多个功能并行开发，这些功能分支最终都会合并到一个开发分支上

 - 因此，我们假定分支`learning-dev`就是那个团队协作中的开发分支，已经有成员先你一步合并了代码，因此你不能简单地merge它，你需要先pull再push

   - 为了更好地模拟实际情况，我预设了一点冲突，请使用VSCode的冲突分析和解决功能
